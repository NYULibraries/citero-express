java = require("java");
java.classpath.push("#{__dirname}/citero.jar");
Formats = java.import("edu.nyu.library.citero.Formats")
class Citero
  constructor: (data) ->
    @cite = java.import("edu.nyu.library.citero.Citero")
    @cite = @cite.mapSync(data)
    this

  @map: (data) ->
    new this(data)

  from: (format) ->
    @cite.fromSync(Formats.valueOfSync(format.toUpperCase()))
    this

  to: (format) ->
	  @cite.toSync(Formats.valueOfSync(format.toUpperCase()))

  @toFormats: ->
    return @destinationFormats if @destinationFormats?
    @destinationFormats = []
    @destinationFormats.push format.nameSync() for format in Formats.valuesSync() when format.isDestinationFormatSync()
    @destinationFormats

  @fromFormats: ->
    return @sourceFormats if @sourceFormats?
    @sourceFormats = []
    @sourceFormats.push format.nameSync() for format in Formats.valuesSync() when format.isSourceFormatSync()
    @sourceFormats


root = exports ? window
root.Citero = Citero
